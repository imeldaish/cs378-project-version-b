/*! For license information please see 22.24575137.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloom=self.webpackChunkbloom||[]).push([[22],{22:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var n=s(43),r=s(910),l=s(462),o=(s(434),s(579));const a=()=>{const e=(0,l.Zp)();return(0,o.jsx)("div",{style:{padding:"12px 12px"},children:(0,o.jsx)("button",{className:"back-button",variant:"primary",onClick:()=>e("/suggestions"),children:"Back to Suggestions"})})},c=()=>{const[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(null);(0,n.useEffect)((()=>{!async function(){try{const e=await fetch("/cs378-project-version-b/suggestions.json"),s=await e.json();for(const n of Object.values(s)){const e=n.suggestions.find((e=>"listen to calming music"===e.activity));if(e&&e.playlist){t(e.playlist),l(e.playlist[0]);break}}}catch(e){console.error("Failed to load playlist:",e)}}()}),[]);return(0,o.jsxs)("div",{className:"",children:[(0,o.jsx)("h1",{children:"Calming Music"}),(0,o.jsx)("p",{children:"Pick a sound to listen to:"}),s&&(0,o.jsx)("div",{className:"activity-display-box",children:(0,o.jsx)(r.A,{src:`/cs378-project-version-b/${s.source}`,title:s.title})}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",width:"85vw",margin:"0 auto"},children:e.map(((e,t)=>(0,o.jsx)("button",{onClick:()=>(e=>{l(e)})(e),className:"playlist-button",children:e.title},t)))}),(0,o.jsx)(a,{})]})}},340:(e,t,s)=>{s.d(t,{A:()=>n});const n=(0,s(784).A)("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},434:(e,t,s)=>{s.d(t,{A:()=>l});s(43);var n=s(462),r=s(579);const l=()=>{const e=(0,n.Zp)();return(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"next-button m-2",onClick:()=>{e("/completed")},children:"I'm Done"})})}},830:(e,t,s)=>{s.d(t,{A:()=>n});const n=(0,s(784).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},910:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(43),r=s(340),l=s(830),o=s(579);const a=e=>{const t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s<10?"0":""}${s}`},c=e=>{let{src:t,title:s}=e;const[c,i]=(0,n.useState)(!1),[u,d]=(0,n.useState)(0),[m,h]=(0,n.useState)(0),[p,x]=(0,n.useState)(1),[v,g]=(0,n.useState)(100),j=(0,n.useRef)(null),y=(0,n.useRef)(null),f=(0,n.useRef)(null),w=t.includes("soundcloud.com");(0,n.useEffect)((()=>{w&&y.current&&window.SC&&(f.current=window.SC.Widget(y.current),f.current.bind(window.SC.Widget.Events.READY,(()=>{console.log("SoundCloud widget ready"),f.current.setVolume(v)})),f.current.bind(window.SC.Widget.Events.PLAY,(()=>{i(!0)})),f.current.bind(window.SC.Widget.Events.PAUSE,(()=>{i(!1)})))}),[t,w,v]),(0,n.useEffect)((()=>{!w&&j.current&&(j.current.volume=p)}),[p,w]);return(0,n.useEffect)((()=>{!w&&j.current&&(j.current.currentTime=0,i(!1))}),[t,w]),(0,o.jsxs)("div",{className:"audio-player",children:[(0,o.jsx)("h3",{children:s}),w?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("iframe",{ref:y,width:"100%",height:"166",scrolling:"no",frameBorder:"no",allow:"autoplay",src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(t)}&color=%2349BA29&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true`,title:"SoundCloud Player"}),(0,o.jsxs)("div",{className:"volume-control mt-1",children:[(0,o.jsxs)("label",{children:["Volume: ",v,"%"]}),(0,o.jsx)("input",{className:"volume-slider",type:"range",min:"0",max:"100",step:"1",value:v,style:{"--value":`${v}%`},onChange:e=>{const t=parseInt(e.target.value,10);g(t),f.current&&f.current.setVolume(t)}})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"audio-controls",children:[(0,o.jsx)("button",{onClick:()=>{w||j.current&&(c?j.current.pause():j.current.play(),i(!c))},className:"play-button",children:c?(0,o.jsx)(r.A,{size:24}):(0,o.jsx)(l.A,{size:24})}),(0,o.jsx)("div",{className:"progress-bar",onClick:e=>{if(j.current){const t=e.nativeEvent.offsetX/e.target.clientWidth*m;j.current.currentTime=t,d(t)}},children:(0,o.jsx)("div",{className:"progress",style:{width:u/m*100+"%"}})}),(0,o.jsxs)("div",{className:"timestamps",children:[(0,o.jsx)("span",{children:a(u)})," / ",(0,o.jsx)("span",{children:a(m)})]})]}),(0,o.jsxs)("div",{className:"volume-control mt-1",children:[(0,o.jsxs)("label",{children:["Volume: ",Math.round(100*p),"%"]}),(0,o.jsx)("input",{className:"volume-slider",type:"range",min:"0",max:"1",step:"0.01",value:p,style:{"--value":100*p+"%"},onChange:e=>x(parseFloat(e.target.value))})]}),(0,o.jsx)("audio",{ref:j,src:t,onTimeUpdate:()=>{j.current&&d(j.current.currentTime)},onLoadedMetadata:()=>{j.current&&h(j.current.duration)},onEnded:()=>{j.current&&(j.current.currentTime=0,j.current.play())},loop:!1,children:"Your browser does not support the audio element."})]})]})}}}]);
//# sourceMappingURL=22.24575137.chunk.js.map