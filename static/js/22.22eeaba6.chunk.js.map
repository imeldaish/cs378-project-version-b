{"version":3,"file":"static/js/22.22eeaba6.chunk.js","mappings":"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","sources":["pages/activities/music.js","../node_modules/lucide-react/src/icons/pause.ts","../node_modules/lucide-react/src/icons/play.ts","components/AudioPlayer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport CustomAudioPlayer from '../../components/AudioPlayer';\nimport { useNavigate } from \"react-router-dom\";\nimport CompleteButton from '../../components/CompleteButton';\n\nconst BackButton = () => {\n  const navigate = useNavigate();\n  return (\n    <div style={{ padding: \"12px 12px\" }}>\n      <button className=\"back-button\" variant=\"primary\" onClick={() => navigate(\"/suggestions\")}>\n        Back to Suggestions\n      </button>\n    </div>\n  );\n};\n\nconst Music = () => {\n  const [playlist, setPlaylist] = useState([]);\n  const [currentTrack, setCurrentTrack] = useState(null); // For current track display\n\n  useEffect(() => {\n    async function fetchSuggestions() {\n      try {\n        const response = await fetch('/cs378-project-version-b/suggestions.json');\n        const data = await response.json();\n\n        // Search all emotions for the meditation activity\n        for (const emotion of Object.values(data)) {\n          const music = emotion.suggestions.find(s => s.activity === 'listen to calming music');\n          if (music && music.playlist) {\n            setPlaylist(music.playlist);\n            setCurrentTrack(music.playlist[0]); // Start with first track\n            break;\n          }\n        }\n      } catch (err) {\n        console.error('Failed to load playlist:', err);\n      }\n    }\n\n    fetchSuggestions();\n  }, []);\n\n  const handleTrackChange = (track) => {\n    setCurrentTrack(track);\n  };\n\n  return (\n    <div className=''>\n      <h1>Calming Music</h1>\n      <p>Pick a sound to listen to:</p>\n\n      {currentTrack && (\n        <div className=\"activity-display-box\">\n          <CustomAudioPlayer\n            src={`/cs378-project-version-b/${currentTrack.source}`}\n            title={currentTrack.title}\n          />\n        </div>\n      )}\n\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '10px', width: '85vw', margin: '0 auto' }}>\n        {playlist.map((track, index) => (\n          <button\n            key={index}\n            onClick={() => handleTrackChange(track)}\n            className=\"playlist-button\">\n            {track.title}\n          </button>\n        ))}\n      </div>\n      {/* <CompleteButton/> */}\n      <BackButton />\n    </div>\n  );\n};\n\nexport default Music;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { x: '14', y: '4', width: '4', height: '16', rx: '1', key: 'zuxfzm' }],\n  ['rect', { x: '6', y: '4', width: '4', height: '16', rx: '1', key: '1okwgv' }],\n];\n\n/**\n * @component @name Pause\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB4PSIxNCIgeT0iNCIgd2lkdGg9IjQiIGhlaWdodD0iMTYiIHJ4PSIxIiAvPgogIDxyZWN0IHg9IjYiIHk9IjQiIHdpZHRoPSI0IiBoZWlnaHQ9IjE2IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pause\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pause = createLucideIcon('pause', __iconNode);\n\nexport default Pause;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['polygon', { points: '6 3 20 12 6 21 6 3', key: '1oa8hb' }]];\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjYgMyAyMCAxMiA2IDIxIDYgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('play', __iconNode);\n\nexport default Play;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Play, Pause } from 'lucide-react';\n\nconst CustomAudioPlayer = ({ src, title }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n\n  const [localVolume, setLocalVolume] = useState(1); // ✅ Local audio volume (0.0 to 1.0)\n  const [widgetVolume, setWidgetVolume] = useState(100); // ✅ SoundCloud volume (0 - 100)\n\n  const audioRef = useRef(null);\n  const soundCloudRef = useRef(null);\n  const widgetRef = useRef(null);\n\n  const isSoundCloud = src.includes('soundcloud.com');\n\n  useEffect(() => {\n    if (isSoundCloud && soundCloudRef.current && window.SC) {\n      widgetRef.current = window.SC.Widget(soundCloudRef.current);\n\n      widgetRef.current.bind(window.SC.Widget.Events.READY, () => {\n        console.log('SoundCloud widget ready');\n        widgetRef.current.setVolume(widgetVolume);\n      });\n\n      widgetRef.current.bind(window.SC.Widget.Events.PLAY, () => {\n        setIsPlaying(true);\n      });\n\n      widgetRef.current.bind(window.SC.Widget.Events.PAUSE, () => {\n        setIsPlaying(false);\n      });\n    }\n  }, [src, isSoundCloud, widgetVolume]);\n\n  // Apply local audio volume\n  useEffect(() => {\n    if (!isSoundCloud && audioRef.current) {\n      audioRef.current.volume = localVolume;\n    }\n  }, [localVolume, isSoundCloud]);\n\n  const togglePlay = () => {\n    if (isSoundCloud) return; // Don't need toggle for SoundCloud (iframe has built-in controls)\n\n    if (audioRef.current) {\n      if (isPlaying) {\n        audioRef.current.pause();\n      } else {\n        audioRef.current.play();\n      }\n      setIsPlaying(!isPlaying);\n    }\n  };\n\n  const updateTime = () => {\n    if (audioRef.current) {\n      setCurrentTime(audioRef.current.currentTime);\n    }\n  };\n\n  const handleLoadedMetadata = () => {\n    if (audioRef.current) {\n      setDuration(audioRef.current.duration);\n    }\n  };\n\n  const handleSeek = (e) => {\n    if (audioRef.current) {\n      const newTime = (e.nativeEvent.offsetX / e.target.clientWidth) * duration;\n      audioRef.current.currentTime = newTime;\n      setCurrentTime(newTime);\n    }\n  };\n\n  const handleTrackEnd = () => {\n    if (audioRef.current) {\n      audioRef.current.currentTime = 0;\n      audioRef.current.play();\n    }\n  };\n\n  useEffect(() => {\n    if (!isSoundCloud && audioRef.current) {\n      audioRef.current.currentTime = 0;\n      setIsPlaying(false);\n    }\n  }, [src, isSoundCloud]);\n\n  return (\n    <div className=\"audio-player\">\n      <h3>{title}</h3>\n\n      {isSoundCloud ? (\n        <>\n          {/* ✅ SoundCloud embedded player */}\n          <iframe\n            ref={soundCloudRef}\n            width=\"100%\"\n            height=\"166\"\n            scrolling=\"no\"\n            frameBorder=\"no\"\n            allow=\"autoplay\"\n            src={`https://w.soundcloud.com/player/?url=${encodeURIComponent(src)}&color=%2349BA29&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true`}\n            title=\"SoundCloud Player\"\n          />\n\n          {/* ✅ Volume slider for SoundCloud */}\n          <div className=\"volume-control mt-1\">\n            <label>Volume: {widgetVolume}%</label>\n            <input\n              className=\"volume-slider\"\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              step=\"1\"\n              value={widgetVolume}\n              style={{ '--value': `${widgetVolume}%` }}\n              onChange={(e) => {\n                const newVolume = parseInt(e.target.value, 10);\n                setWidgetVolume(newVolume);\n                if (widgetRef.current) {\n                  widgetRef.current.setVolume(newVolume);\n                }\n              }}\n            />\n          </div>\n        </>\n      ) : (\n        <>\n          {/* ✅ Local audio player with controls */}\n          <div className=\"audio-controls\">\n            <button onClick={togglePlay} className=\"play-button\">\n              {isPlaying ? <Pause size={24} /> : <Play size={24} />}\n            </button>\n\n            <div className=\"progress-bar\" onClick={handleSeek}>\n              <div\n                className=\"progress\"\n                style={{ width: `${(currentTime / duration) * 100}%` }}\n              />\n            </div>\n\n            <div className=\"timestamps\">\n              <span>{formatTime(currentTime)}</span> / <span>{formatTime(duration)}</span>\n            </div>\n          </div>\n\n          {/* ✅ Volume slider for local audio */}\n          <div className=\"volume-control mt-1\">\n            <label>Volume: {Math.round(localVolume * 100)}%</label>\n              <input\n                className=\"volume-slider\"\n                type=\"range\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.01\"\n                value={localVolume}\n                style={{ '--value': `${localVolume * 100}%` }}\n                onChange={(e) => setLocalVolume(parseFloat(e.target.value))}\n              />\n\n          </div>\n\n          <audio\n            ref={audioRef}\n            src={src}\n            onTimeUpdate={updateTime}\n            onLoadedMetadata={handleLoadedMetadata}\n            onEnded={handleTrackEnd}\n            loop={false}\n          >\n            Your browser does not support the audio element.\n          </audio>\n        </>\n      )}\n    </div>\n  );\n};\n\n// Format time in mm:ss\nconst formatTime = (time) => {\n  const minutes = Math.floor(time / 60);\n  const seconds = Math.floor(time % 60);\n  return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n};\n\nexport default CustomAudioPlayer;\n"],"names":["BackButton","navigate","useNavigate","_jsx","style","padding","children","className","variant","onClick","Music","playlist","setPlaylist","useState","currentTrack","setCurrentTrack","useEffect","async","response","fetch","data","json","emotion","Object","values","music","suggestions","find","s","activity","err","console","error","fetchSuggestions","_jsxs","CustomAudioPlayer","src","source","title","display","gridTemplateColumns","gap","width","margin","map","track","index","handleTrackChange","Pause","createLucideIcon","x","y","height","rx","key","Play","points","formatTime","time","minutes","Math","floor","seconds","_ref","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","localVolume","setLocalVolume","widgetVolume","setWidgetVolume","audioRef","useRef","soundCloudRef","widgetRef","isSoundCloud","includes","current","window","SC","Widget","bind","Events","READY","log","setVolume","PLAY","PAUSE","volume","_Fragment","ref","scrolling","frameBorder","allow","encodeURIComponent","type","min","max","step","value","onChange","e","newVolume","parseInt","target","togglePlay","pause","play","size","newTime","nativeEvent","offsetX","clientWidth","round","parseFloat","onTimeUpdate","updateTime","onLoadedMetadata","handleLoadedMetadata","onEnded","handleTrackEnd","loop"],"sourceRoot":""}