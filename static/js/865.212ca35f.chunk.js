/*! For license information please see 865.212ca35f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloom=self.webpackChunkbloom||[]).push([[865],{340:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(784).A)("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},434:(e,t,s)=>{s.d(t,{A:()=>a});s(43);var r=s(462),n=s(579);const a=()=>{const e=(0,r.Zp)();return(0,n.jsx)("div",{children:(0,n.jsx)("button",{className:"next-button m-2",onClick:()=>{e("/completed")},children:"I'm Done"})})}},830:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(784).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},865:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var r=s(43),n=s(910),a=s(434),l=(s(717),s(460)),o=s(579);const i=()=>{const[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[c,u]=(0,r.useState)(null),[d,p]=(0,r.useState)(null);(0,r.useEffect)((()=>{!async function(){try{const e=await fetch("/cs378-project-version-b/suggestions.json"),s=await e.json();for(const r of Object.values(s)){const e=r.suggestions.find((e=>"meditation"===e.activity));if(e){e.playlist&&(t(e.playlist),u(e.playlist[0])),e.walkthroughs&&(i(e.walkthroughs),p(e.walkthroughs[0]));break}}}catch(e){console.error("Failed to load suggestions:",e)}}()}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.A,{percentage:70}),(0,o.jsxs)("div",{className:"page",children:[(0,o.jsx)("h1",{style:{paddingTop:"30px"},children:"Meditation Tracks"}),(0,o.jsx)("p",{children:"First, pick a track to meditate to:"}),c&&(0,o.jsx)("div",{className:"activity-display-box",children:(0,o.jsx)(n.A,{src:`/cs378-project-version-b/${c.source}`,title:c.title,className:"audio-player"})}),(0,o.jsx)("div",{style:{paddingBottom:"15px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",width:"85vw",margin:"0 auto"},children:e.map(((e,t)=>(0,o.jsx)("button",{onClick:()=>(e=>{u(e)})(e),className:"playlist-button",children:e.title},t)))}),(0,o.jsx)("h2",{className:"mt-2",children:"Guided Walkthroughs"}),(0,o.jsx)("p",{children:"Next, select a track to guide you:"}),d&&(0,o.jsx)("div",{className:"activity-display-box",children:(0,o.jsx)(n.A,{src:d.source,title:d.title,className:"audio-player"})}),(0,o.jsx)("div",{style:{paddingBottom:"15px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",width:"85vw",margin:"0 auto"},children:s.map(((e,t)=>(0,o.jsx)("button",{onClick:()=>(e=>{p(e)})(e),className:"playlist-button",children:e.title},t)))}),(0,o.jsx)(a.A,{})]})]})}},910:(e,t,s)=>{s.d(t,{A:()=>i});var r=s(43),n=s(340),a=s(830),l=s(579);const o=e=>{const t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s<10?"0":""}${s}`},i=e=>{let{src:t,title:s}=e;const[i,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(0),[p,h]=(0,r.useState)(0),[m,x]=(0,r.useState)(1),[g,j]=(0,r.useState)(100),v=(0,r.useRef)(null),y=(0,r.useRef)(null),f=(0,r.useRef)(null),w=t.includes("soundcloud.com");(0,r.useEffect)((()=>{w&&y.current&&window.SC&&(f.current=window.SC.Widget(y.current),f.current.bind(window.SC.Widget.Events.READY,(()=>{console.log("SoundCloud widget ready"),f.current.setVolume(g)})),f.current.bind(window.SC.Widget.Events.PLAY,(()=>{c(!0)})),f.current.bind(window.SC.Widget.Events.PAUSE,(()=>{c(!1)})))}),[t,w,g]),(0,r.useEffect)((()=>{!w&&v.current&&(v.current.volume=m)}),[m,w]);return(0,r.useEffect)((()=>{!w&&v.current&&(v.current.currentTime=0,c(!1))}),[t,w]),(0,l.jsxs)("div",{className:"audio-player",children:[(0,l.jsx)("h3",{children:s}),w?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("iframe",{ref:y,width:"100%",height:"166",scrolling:"no",frameBorder:"no",allow:"autoplay",src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(t)}&color=%2349BA29&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true`,title:"SoundCloud Player"}),(0,l.jsxs)("div",{className:"volume-control mt-1",children:[(0,l.jsxs)("label",{children:["Volume: ",g,"%"]}),(0,l.jsx)("input",{className:"volume-slider",type:"range",min:"0",max:"100",step:"1",value:g,style:{"--value":`${g}%`},onChange:e=>{const t=parseInt(e.target.value,10);j(t),f.current&&f.current.setVolume(t)}})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"audio-controls",children:[(0,l.jsx)("button",{onClick:()=>{w||v.current&&(i?v.current.pause():v.current.play(),c(!i))},className:"play-button",children:i?(0,l.jsx)(n.A,{size:24}):(0,l.jsx)(a.A,{size:24})}),(0,l.jsx)("div",{className:"progress-bar",onClick:e=>{if(v.current){const t=e.nativeEvent.offsetX/e.target.clientWidth*p;v.current.currentTime=t,d(t)}},children:(0,l.jsx)("div",{className:"progress",style:{width:u/p*100+"%"}})}),(0,l.jsxs)("div",{className:"timestamps",children:[(0,l.jsx)("span",{children:o(u)})," / ",(0,l.jsx)("span",{children:o(p)})]})]}),(0,l.jsxs)("div",{className:"volume-control mt-1",children:[(0,l.jsxs)("label",{children:["Volume: ",Math.round(100*m),"%"]}),(0,l.jsx)("input",{className:"volume-slider",type:"range",min:"0",max:"1",step:"0.01",value:m,style:{"--value":100*m+"%"},onChange:e=>x(parseFloat(e.target.value))})]}),(0,l.jsx)("audio",{ref:v,src:t,onTimeUpdate:()=>{v.current&&d(v.current.currentTime)},onLoadedMetadata:()=>{v.current&&h(v.current.duration)},onEnded:()=>{v.current&&(v.current.currentTime=0,v.current.play())},loop:!1,children:"Your browser does not support the audio element."})]})]})}}}]);
//# sourceMappingURL=865.212ca35f.chunk.js.map